<!DOCTYPE html>
<html lang="en">
    

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <label title="Número do CEP">Número do CNPJ</label>
    <input type="text" name="numero_cep" id="numero_cep" />

    <input type="button" value="Pesquisar endereço no VIACEP" onclick="chamarServicoViaCEP()" />
</body>

</html>

<script>
//     const cnpj = '12345678901234'; // CNPJ desejado
// fetch('https://cors-anywhere.herokuapp.com/https://receitaws.com.br/v1/cnpj/' + cnpj)
//     .then(response => response.json())
//     .then(data => {
//         console.log(data); // Dados do CNPJ
//     })
//     .catch(error => {
//         console.error('Erro ao fazer a requisição:', error);
//     });


    function chamarServicoViaCEP() {

        cep_digitado = document.getElementById("numero_cep").value;


        if (cep_digitado == "") {
            alert("Ô seu BIOS, informe o CEP!");
            return;
        }


        const urlViaCEP = "https://cors-anywhere.herokuapp.com/https://receitaws.com.br/v1/cnpj/" + cep_digitado;

        fetch(urlViaCEP)

            .then((response) => {

                if (response.ok) {
                    alert("Resposta OK");

                    return response.json();
                }

                if (!response.OK) {
                    alert("Resposta não OK");
                }


            })

            .then((data) => {

                //alert(JSON.stringify(data));
                console.log(`Status: ${data.status}`);
                console.log(`Última Atualização: ${data.ultima_atualizacao}`);
                console.log(`Cnpj: ${data.cnpj}`);
                console.log(`Tipo: ${data.tipo}`);
                console.log(`Porte: ${data.porte}`);
                console.log(`Nome: ${data.nome}`);
                console.log(`Fantasia: ${data.fantasia}`);
                console.log(`Data de Abertura: ${data.abertura}`);

                console.log(`Texto: ${data.atividades_principal[0].text}`);
                console.log(`Código: ${data.atividades_principal[0].code}`);
                console.log(`Texto2: ${data.atividades_secundarias[0].text}`);
                console.log(`Código2: ${data.atividades_secundarias[0].code}`);

                console.log(`Natureza Juridica: ${data.natureza_juridica}`);
                console.log(`Logradouro: ${data.logradouro}`);
                console.log(`Complemento: ${data.numero}`);
                console.log(`Cep: ${data.cep}`);
                console.log(`Bairro: ${data.bairro}`);
                console.log(`Municipio: ${data.municipio}`);
                console.log(`UF: ${data.uf}`);
                console.log(`Email: ${data.email}`);
                console.log(`Telefone: ${data.telefone}`);
                console.log(`EFR: ${data.efr}`);
                console.log(`Situação: ${data.situacao}`);
                console.log(`Motivo da Situação: ${data.motivo_situacao}`);
                console.log(`Situação Especial: ${data.situacao_especial}`);
                console.log(`Data da Situação Especial: ${data.data_situacao_especial}`);
                console.log(`Capital Social: ${data.capital_social}`);
                console.log(`Municipio: ${data.municipio}`);

                console.log(`Nome: ${data.qsa[0].nome}`);
                console.log(`Qual: ${data.qsa[0].qual}`);
                console.log(`País Origem: ${data.qsa[0].pais_origem}`);
                console.log(`Nome Rep Legal: ${data.qsa[0].nome_rep_legal}`);
                console.log(`Qual Rep Legal: ${data.qsa[0].qual_rep_legal}`);
                
                console.log(`Grátis: ${data.billing[0].free}`);
                console.log(`Database: ${data.billing[0].database}`);
                /*
                atividades_secundarias": [
            {
              "code": "string",
              "text": "string"
            }
          ]

            data.atividades_secundarias[0].text
                */

            })

            .catch(error => {

                alert("Erro ao requisitar o serviço na nuvem!");

                console.error("Erro ao requisitar o serviço na nuvem!");
            });



    }
</script>